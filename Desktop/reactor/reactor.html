<!DOCTYPE HTML>
<html>
	<head>
	<meta charset="utf-8">
	<title>reactor</title>
	<link rel="stylesheet" href="style.css">
	</head>
	<body>
	<script>
	function delet() {
		var myNode = document.getElementById("del");
			while (myNode.firstChild) {
				myNode.removeChild(myNode.firstChild);
		}
	}
	var check = 0;
	function reactor() {	
		check = check + 1;
		if(check < 3) {
			document.write('<link rel="stylesheet" href="style.css">');
			document.write('<h1>Ядерный реактор</h1>');
			document.write('<table cellspacing="10">');
			document.write('<tr>');
			document.write('<td bgcolor=#F08080>Стержень выдвинут</td>');
			document.write('<td bgcolor=#3CB371>Стержень задвинут</td>');
			document.write('</table>');	
			document.write('<p>Температура: 450 К</p>');
			document.write('<button id="btn1" onclick="reactor();"/>Перерисовать</button>');
			document.write('<button id="btn2" onclick="delet();"/>Очистить</button>');
		}
		var N;
		var I = 0;
		var xmlhttp;
		xmlhttp=new XMLHttpRequest();
		xmlhttp.open("GET","http://localhost/reactor/ajax.php",false);
		xmlhttp.send();
		while(xmlhttp.readyState != 4) {
			I = I + 1;
		}
		N=xmlhttp.responseText;
		N = Math.sqrt(N);
		N = Math.round(N);
		var K = N - 1;
		document.write('<ul id = "del">');
		document.write('<div class="line">');
		document.write('<div class="circle">');
		document.write('</div>');
		for(i=1; i<N; i++) {
			document.write('<div class="circle1">');
			document.write('</div>');
		};
		document.write('</div>');
		for(j=0;j<K;j++) {
		document.write('<div class="line">');
		for(i=1; i<N+2; i++) {
			document.write('<div class="circle1">');
			document.write('</div>');
		};
		document.write('</div>');
		};
		document.write('<div class="line">');
		document.write('<div class="circle">');
		document.write('</div>');
		for(i=1; i<N; i++) {
			document.write('<div class="circle1">');
			document.write('</div>');
		};
		document.write('</div>');
		document.write('</ul>');
		
	}
	reactor();
	</script>
	</body>
</html>
